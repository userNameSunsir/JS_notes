# 9.对象

1. ##### 什么是对象

   1. 对象是一个**具体的事物**；
   2. **Javascript**中：对象是一组**无序的相关属性和方法的集合**，所有的事物都是对象；
   3. 对象是由**属性和方法**组成的：
      - 属性：事物的特征；
      - 方法：事物的行为；

2. **为什么需要对象**：JS中的对象表达结构更清晰，更强大；

#### 1、创建对象的三种方式：

###### 1、利用字面量创建对象

1. 字面量创建对象采取的是大括号{}；

   1. {}里面的属性或方法采取**键值对**的形式（键---属性名   ： 值---属性值）；
   2. 多个属性或方法中间用**逗号**隔开；
   3. 方法冒号后面跟的是一个匿名函数；

2. 使用对象

   1. 调用对象的属性--------
      - 采取 对象名.属性名 （如：obj.myname）
      - 采取 对象名['属性名'] （如：obj['age']）
   2. 调用对象的方法--------
      - 采取 对象名.方法名() （如： obj.fn()）

3. 变量、属性、函数、方法的不同之处

   1. 变量：单独声明赋值、单独存在；

   2. 属性、对象里面的变量称为属性，不需要声明，用来描述对象的特征；

   3. 函数：单独存在的，通过  “函数名()”的方式就可以调用；

   4. 方法：对象里面的函数称为方法，方法不需要声明，使用“对象.方法名()”的方式就可以调用，方法用来描述该对象的行为和功能；

      ```html
      <script>
      	var dog = {
                  myname: '可可',
                  type: '阿拉斯加犬',
                  age: 18,
                  color: '棕红色',
                  skill: function() {
                      console.log('叫汪汪汪----baek');
                  }
              }
              console.log(dog.myname);
              console.log(dog.type);
              console.log(dog.age);
      </script>
      ```

###### 2、利用new Object创建对象

1. 创建方式：

   ```html
   <script>
   	var obj = new Object(); // 创建了一个空的对象
   </script>
   ```

2. 和字面量创建的区别：

   1. 利用 等号**=** 赋值 --------来添加对象的属性和方法；

   2. 每个属性和方法之间用**分号**结束；

      ```javascript
       var obj = new Object();
              obj.name = '名人';
              obj.sex = '男';
              obj.age = '18';
              obj.skill = function() {
                  console.log('分省数');
              }
              console.log(obj.name);
              console.log(obj.sex);
              console.log(obj.age);
              console.log(obj.skill());
      ```

###### 3、利用构造函数创建对象

1. 构造函数的概念： 就是把对象里面一些相同的属性和方法抽象出来封装到函数里面；

2. 构造函数的语法格式：

   ```html
   <script>
   	function 构造函数名() {
           this.属性 = 值;
           this.方法 = function() {
               
           }
       }
       new 构造函数名();
   </script>
   ```

3. 书写规范：

   1. 构造函数名首字母要大写；

   2. 构造函数不需要return 就可以直接返回结果；

   3. 调用构造函数必须使用 new；

   4. 只要new 构造函数名() 调用函数 就创建了一个对象；

   5. 属性和方法前面必须加上 this（代表当前函数）；

      ```html
      	<script>  
      // 构造函数创建
              function Star(uname, sex, age) {
                  this.uname = uname;
                  this.sex = sex;
                  this.age = age;
                  this.sing = function(sing) {
                      console.log(sing);
                  }
              }
              var sir = new Star('先生', '男', 20);
              sir.sing('烟火人间');
              console.log(sir);
              console.log(sir.uname);
          </script>
      ```

4. 构造函数和对象的联系------------（**抽象和实例**）

   1. 构造函数： 抽象了对象的公共部分，封装到了函数里面，泛指某一大类；
   2. 对象：特指某一个，通过new关键字创建对象的过程我们也称为对象实例化；

5. 遍历对象----------**for...in...**

   ```html
   <script>
   	for(变量 in 对象) {
           // 输出
       }
       
       for(k in obj) {
           console.log(k); // k就是变量，输出得到的是属性名；
           console.log(obj[k]); // obj[k] 输出得到的是属性值；
       }
   </script>
   ```

#### 2、内置对象

###### 1、内置对象的概述：

- 内置对象就是指JS语言自带的一些对象，这些对象供开发者使用，并提供了一些常用的或最基本而必要的功能（**属性和方法**）；
- 可以通过查阅文档来查看内置对象：
  - W3School
  - MDN
  - 菜鸟

###### 2、Math对象：

1. Math对象(数学对象)-----不是一个构造函数，而是内置对象，我们可以直接使用里面的属性和方法；

2. 常用Math对象：

   | Math对象       | 说明                                            |
   | -------------- | ----------------------------------------------- |
   | Math . PI      | 圆周率                                          |
   | Math . max()   | 最大值                                          |
   | Math . min()   | 最小值                                          |
   | Math . abs()   | 绝对值（注意：字符型返回的是NaN）               |
   | Math . floor() | 向下取整                                        |
   | Math . ceil()  | 向上取整                                        |
   | Math . round() | 四舍五入---就近取整（注意：-3.5   的结果是 -3） |

3. **Math . random---随机数**：函数返回一个范围内的数据，希望从0到0，然后从0**到****1**，希望从1到1的范围。将最终最初选择到任意数字算法；它不能被用户重新选择或重新设置。

   ```html
   <script>
       // 随机生成两个数之间的按任意整数
   	function getRandomIntInclusive(min, max) {
         min = Math.ceil(min);
         max = Math.floor(max);
         return Math.floor(Math.random() * (max - min + 1)) + min; //含最大值，含最小值 
       }
   </script>
   ```

###### 3、Date对象：

1.  Date概述：Date对象是一个构造函数，所以需要实例化（new）后才能使用；

2. Date()方法的使用：

   1. **获取当前时间必须实例化**

      ```html
      <script>
      	var date = new Date();
          console.log(date);
      </script>
      ```

   2. Date()构造函数的参数：如果括号里面有时间，就返回参数里面的时间。

      ```html
      <script>
          // 方法一
      	var date = new Date('2020-10-1');
          console.log(date);
          //方法二
          var date = new Date('2020/10/1');
          console.log(date);
      </script>
      ```

3. 日期格式化：

   | 方法名           | 说明                        | 代码                    |
   | ---------------- | --------------------------- | ----------------------- |
   | get Full Year () | 获取当年年份                | date . get Full Year () |
   | get Month()      | 获取当月(0~11)  *注意：加1* | date . get Month ()     |
   | get Date()       | 获取当天日期                | date . get Date ()      |
   | get Day()        | 获取星期几（周日0~ 周六6）  | date . get Day ()       |
   | get Hours()      | 获取当前小时                | date . get  Hours()     |
   | get Minutes()    | 获取当前分钟                | date . get Minutes()    |
   | get Seconds()    | 获取当前秒数                | date . get Seconds()    |

4. 时间戳---（Date()总的毫秒数） 、

   - 获取Date总的毫秒数(时间戳)，不是当前时间的毫秒数，而是距离1970年1月1号过了多长时间 

     ```JavaScript
     // 1. 通过valueOf()  或  getTime() 获取
     	var date = new Date();
     	console.log(date.valueOf());
     	console.log(date.getTime());
     // 2. 简单的写法 （开发中常用）
     	var date1 = +new Date();
     	console.log(date1);
     // 3. H5新增的方法 获取时间戳
     	console.log(Date.now());
     ```

5. 倒计时案例

   1. 核心算法：
      - 输入的时间减去现在的时间就是剩余时间(输入时间 - 当前时间 = 剩余时间)；
      - 需要用**时间戳**来做，用户输入时间总的毫秒数减去现在时间总的毫秒数，得到的就是剩余时间的毫秒数；
      - 把剩余时间总的毫秒数转换为天、时、分、秒(时间戳转换时分秒)
   2. 转换公式：
      - d = parseInt(总秒数 / 60 /60 /24)；  // 计算天数
      - h =parseInt(总秒数 / 60 /60 %24); // 计算小时
      - m = parseInt(总秒数/60%60)； // 计算分钟
      - s = parseInt(总秒数%60)； // 计算当前秒数

###### 4、Array对象：

1. 数组的创建方式：

   1. 字面量创建

      ```javascript
      var arr = [1,2,3];
      console.log(arr);
      ```

   2. new Array()创建

      ```javascript
      //一
      var arr = new Array(2); //注意：Array里面的2代表数组的长度是2，代表了里面有2个空的数组元素
      console.log(arr);
      //二
      var arr = new Array(2,3);// 等价于字面量创建[2，3]，代表里面有2个数组元素，为2和3
      console.log(arr);
      ```

2. 检测是否为数组的两种方式：

   1. **instance of运算符**；

   2. **Array . isArray (参数)**；

      ```javascript
      // 方式一---------------
      console.log(arr instanceof Array) // true
      console.log(obj instanceof Array) // false
      // 方式二---------------
      console.log(Array.isArray(arr)) // true
      console.log(Array.isArray(obj)) // false
      ```

      ===当检测Array实例时，Array.isArray 优先于instanceof；

3. 添加删除数组元素的方法：

   | 方法名        | 说明                                                     | 返回值             |
   | ------------- | -------------------------------------------------------- | ------------------ |
   | push(参数)    | 在末尾添加一个或多个元素，注意：**修改原数组**           | 并返回新的数组长度 |
   | unshift(参数) | 在开头添加一个或多个元素，注意：**修改原数组**           | 并返回新的数组长度 |
   | =========     | ===============================                          | ==============     |
   | pop()         | 删除数组最后一个元素，数组长度减一  注意：**修改原数组** | 返回删除的元素     |
   | shift()       | 删除数组第一个元素，数组长度减一   注意：**修改原数组**  | 返回删除的元素     |

4. 数组排序的方法

   | 方法名    | 说明                          | 是否修改原数组                     |
   | --------- | ----------------------------- | ---------------------------------- |
   | reverse() | 颠倒数组中元素的顺序---无参数 | 该方法会改变原来的数组，返回新数组 |
   | sort()    | 对数组的元素进行排序          | 该方法会改变原来的数组，返回新数组 |

   1. sort()方法进行升序或降序----需要用函数的参数来实现

      ```javascript
      var arr = [12,13,3,1,4,55];
      arr.sort(function(a,b) {
          // 数学原理：(a-b)>0 ? a>b : a<b
          return a-b; // 实现升序的排序
          return b-a; // 实现降序的排序
      })
      ```

5. 数组索引的方法

   | 方法名          | 说明                             | 返回值                                                       |
   | --------------- | -------------------------------- | ------------------------------------------------------------ |
   | index Of()      | 数组中查找给定的元素的第一个索引 | 如果存在返回索引号，则返回当前索引号，---如果不存在，则返回-1 |
   | last Index Of() | 在数组中的最后一个的索引         | 如果存在返回索引号，则返回当前索引号，---如果不存在，则返回-1 |

6. 数组去重

   1. 核心算法：遍历旧数组，然后拿着旧数组元素去查询新数组，如果该元素里面没有出现过，就添加进去，否则不添加；

      ```html
      <script>
              function unique(arr) {
                  var newArr = []; // 创建新数组
                  for (var i = 0; i < arr.length; i++) {
                      // 核心代码
                      if (newArr.indexOf(arr[i]) === -1) {
                          newArr.push(arr[i]);
                      }
                  }
                  return newArr;
              }
              var demo = unique([1, 2, 2, 1, 3, 4, 5, 3, 5, 1]);
              console.log(demo);
          </script>
      ```

7. 数组转换成字符串

   | 方法名       | 说明                                       | 返回值         |
   | ------------ | ------------------------------------------ | -------------- |
   | toString()   | 把数组转换成字符串，逗号分隔每一项         | 返回一个字符串 |
   | join(分隔符) | 方法用于把数组中的所有元素转换成一个字符串 | 返回一个字符串 |

8. 数组的连接

   | 方法名    | 说明                             | 返回值         |
   | --------- | -------------------------------- | -------------- |
   | con-cat() | 连接两个或多个数组，不影响原数组 | 返回一个新数组 |

9. 数组的截取与删除

   | 方法名   | 说明                                   | 返回值                                      |
   | -------- | -------------------------------------- | ------------------------------------------- |
   | slice()  | 数组截取slice(begin,end)               | 返回被截取项目的新数组                      |
   | splice() | 数组删除splice(第几个开始，要删除个数) | 返回被删除项目的新数组， 注意：会影响原数组 |


###### 5、String对象：

1. **基本包装数据类型**：就是把简单的数据类型包装成复杂数据类型，这样基本数据类型就有了属性和方法。

2. **字符串的不可变**：指的是里面的值不可变，虽然看上去可以改变里面的内容，但其实是地址变了，内存中新开辟了内存空间。（----值不会改变，只是内存在不断的变化）。

3. **根据字符返回位置**：字符串所有的方法，都不会修改字符串本身(字符串是不可变的)，操作完成会返回一个新的字符串。

   | 方法名            | 说明                                                         |
   | ----------------- | ------------------------------------------------------------ |
   | index-Of()        | 返回指定内容在原字符串中的位置，如果找不到就返回-1，开始的位置是index索引号 |
   | last-Index-Of（） | 从后往前找，只找第一个匹配的                                 |

4. **根据位置返回字符(重点)**

   | 方法名              | 说明                              | 使用                              |
   | ------------------- | --------------------------------- | --------------------------------- |
   | char-At(index)      | 返回指定位置的字符(index是索引号) | str.charAt(0)                     |
   | char-Code-At(index) | 获取指定位置处字符的ASCII码       | str.charCodeAt(0)                 |
   | str[index]          | 获取指定位置的字符                | H5新增，IE8+支持，和char-At()等效 |

5. ```html
   <script>
           //根据字符返回位置
           // 求o 出现的位置及次数
           var str = 'Aaovoacoxvdofog';
           var index = str.indexOf('o'); //求0出现的位置
           var num = 0; //统计出现的次数
           // console.log(index);
           while (index !== -1) { // 如果o不等于-1就继续输出
               console.log(index);
               num++;
               index = str.indexOf('o', index + 1); //不等于-1就继续输出
           }
           console.log('o出现的次数：' + num);
           //根据位置返回字符
           for (var i = 0; i < str.length; i++) {
               console.log(str.charCodeAt(i));
               console.log(str.charAt(i));
           }
           console.log(str[3]);
       </script>
   ```

6. **字符串操作的方法（重点）**

   | 方法名                     | 说明                                                         |
   | -------------------------- | ------------------------------------------------------------ |
   | coucat(str1,str2,str3,...) | concat()方法用于连接两个或多个字符串。拼接字符串，等效于+,但+更常用 |
   | substr(start,length)       | 从start位置开始，length取的个数                              |
   | slice(start,end)           | 从start位置开始，截取到end位置，end取不到                    |
   | substring(start,end)       | 从start位置开始，截取到end位置，end取不到， ----但不接受负值 |

7. **其他方法**

   | 方法名                                  | 说明                                                     |
   | --------------------------------------- | -------------------------------------------------------- |
   | replace('被替换的字符'，‘替换为的字符’) | 如果有多个，只能替换第一个字符（可用循环替换多个相同的） |
   | split(‘分隔符’)                         | 字符串转换为数组                                         |
   | toUpperCase()                           | 转换为大写                                               |
   | toLowerCase()                           | 转换为小写                                               |

   

