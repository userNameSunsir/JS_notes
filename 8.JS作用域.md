# 8.javascript作用域

#### 1、作用域：

1. ​	作用域的概念： 就是代码名字(变量)在某个范围内起作用和效果，目的是为了提高程序的可靠性，恒重要的是减少命名冲突；

2. js作用域：

   1. 全局作用域：在script标签中的，称之为全局作用域；
   2. 局部作用域（函数作用域）：只是在函数体内起作用；

3. 变量的作用域：

   1. 全局变量：

      1. 在全局作用域下声明的变量，称为全局变量;
      2. 在函数内部没有声明的变量，也是全局变量；

      ```html
      <script>
          // 全局变量
      	var num = 10;
          console.log(num);
          function fn() {
              console.log(num)
          } 
          fn();  // 10;
      </script>
      ```

   2. 局部变量：

      1. 在局部作用域下的变量，只在函数体内部声明的变量；
      2. 函数的形参，也可以看作为局部变量；

      ```html
      <script>
      	// 局部变量
          function fun() {
              var num = 10;
          }
          fun();
          console.log(num); // 结果会报错;
      </script>
      ```

   3. 全局变量和局部变量的区别：

      1. 全局变量：在任何一个地方都可以使用，只有在浏览器关闭的时候才会被销毁，因此比较占内存；
      2. 局部变量：只有在函数内部使用，当其所在的代码块被执行时，会被初始化；当代码块运行结束后，就会被销毁，因此更节省资源和内存空间；

#### 2、作用域链：

- ​	内部函数访问外部函数的变量，采用的是链式查找的方式来决定取那个值，这种结构我们称之为作用域链；（就近原则）；

  ```html
  <script>
  	function f1() {
          var num = 123;
          
          function f2() {
              console.log(num);
          }
          f2();
      }
      var num = 456；
      f1(); 
      	// 输出结果是： 123；
  </script>
  ```

#### 3、javascript预解析：

1. JS引擎运行js时分为两步： **预解析  和  代码执行**；

   1. 预解析：js引擎会把js里面所有的**var  和 function** 提升到当前作用域的最前面；
   2. 代码执行：按照解析完之后的代码位置，从上往下依次执行；

2. 预解析分为： **变量预解析(变量提升)   和   函数预解析(函数提升)**;

   1. 变量提升： 就是把所有的**变量声明**提升到当前的作用域最前面，不提升赋值操作；

   2. 函数提升：就是把所有的**函数声明**提升到当前的作用域最前面，不调用函数；

      ```html
      <script>
          // 变量预解析
          fun();
          var fun = function(){
              console.log(22);
          }
      	// 变量提升
          var fun;
          fun();
          fun = function(){
              console.log(22);
          }
          // 函数表达式的调用必须写在下面
          // 结果会报错
          ---------------------------------------------
          // 函数预解析
           fn();
          function fn(){
              console.log(11);
          }
         	// 函数提升
           function fn(){
              console.log(11);
          }
          fn();
          // 结果会输出 11
      </script>
      ```

3. 



























